<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>EnergyOS â€” SaaS Inteligente</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body { background:#0B1120; }
</style>
</head>

<body class="text-white">

<!-- LOGIN -->
<div id="loginModal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50">
  <div class="bg-[#111C33] p-10 rounded-xl w-96 space-y-6">
    <h2 class="text-2xl text-center">EnergyOS Login</h2>
    <input type="text" id="username" placeholder="UsuÃ¡rio" class="w-full p-3 rounded bg-[#0B1120] border border-white/20"/>
    <input type="password" id="password" placeholder="Senha" class="w-full p-3 rounded bg-[#0B1120] border border-white/20"/>
    <button onclick="login()" class="w-full bg-cyan-500 py-3 rounded text-black font-semibold">
      Entrar
    </button>
  </div>
</div>

<!-- APP -->
<div id="app" class="hidden">

<!-- SIDEBAR -->
<aside id="sidebar" class="fixed top-0 left-0 h-full w-64 bg-[#111C33] p-6 transform -translate-x-full md:translate-x-0 transition duration-300 z-40">
  <h1 class="text-cyan-400 text-xl mb-8">EnergyOS</h1>
  <nav class="flex flex-col gap-4">
    <button onclick="showDashboard('overview')">Overview</button>
    <button onclick="showDashboard('finance')">Financeiro</button>
    <button onclick="showDashboard('alerts')">Alertas</button>
    <button onclick="logout()" class="text-red-400 mt-auto">Sair</button>
  </nav>
</aside>

<div id="overlay" class="fixed inset-0 bg-black/60 hidden md:hidden z-30"></div>

<!-- MAIN -->
<main class="md:ml-64 p-6 md:p-10 space-y-10">

<nav class="flex justify-between items-center">
  <button id="menuToggle" class="md:hidden text-2xl">â˜°</button>
  <h2 class="text-xl">Dashboard</h2>
</nav>

<!-- FILTRO -->
<select id="periodFilter" onchange="applyFilter()" class="bg-[#111C33] border border-white/20 px-4 py-2 rounded">
<option value="6">Ãšltimos 6 meses</option>
<option value="3">Ãšltimos 3 meses</option>
<option value="12">Ãšltimos 12 meses</option>
</select>

<!-- OVERVIEW -->
<section id="overview">

<div class="grid md:grid-cols-4 gap-6 mt-6">

<div class="bg-[#0F172A] p-6 rounded-xl">
<div class="text-xs text-white/40">Consumo</div>
<div id="totalConsumption" class="text-xl text-cyan-400 font-semibold">0 GWh</div>
</div>

<div class="bg-[#0F172A] p-6 rounded-xl">
<div class="text-xs text-white/40">EficiÃªncia</div>
<div id="efficiency" class="text-xl text-green-400 font-semibold">0%</div>
</div>

<div class="bg-[#0F172A] p-6 rounded-xl">
<div class="text-xs text-white/40">Custo</div>
<div id="cost" class="text-xl text-red-400 font-semibold">R$0</div>
</div>

<div class="bg-[#0F172A] p-6 rounded-xl">
<div class="text-xs text-white/40">Alertas</div>
<div id="alertsCount" class="text-xl text-yellow-400 font-semibold">0</div>
</div>

</div>

<div class="bg-[#0F172A] p-6 rounded-xl mt-8">
<canvas id="overviewChart"></canvas>
</div>

<div class="bg-[#111C33] p-4 rounded-xl mt-6">
<p id="aiInsight"></p>
</div>

</section>

<!-- FINANCE -->
<section id="finance" class="hidden">
<div class="bg-[#0F172A] p-6 rounded-xl">
<canvas id="financeChart"></canvas>
</div>
<div class="bg-[#111C33] p-4 rounded-xl mt-6">
<p id="financeProjection"></p>
</div>
</section>

<!-- ALERTS -->
<section id="alerts" class="hidden">
<ul id="alertsList" class="space-y-4 mt-6"></ul>
</section>

</main>
</div>

<script>
document.addEventListener("DOMContentLoaded", function(){

let overviewChart, financeChart;
let realtimeInterval;

let baseData=[80,82,85,88,90,93];
let months=["Jan","Fev","Mar","Abr","Mai","Jun"];
let financeData=[120000,130000,110000,140000,125000,150000];

let mockAlerts=[
{message:"Sobrecarga transformador"},
{message:"Queda de tensÃ£o setor 3"}
];

/* LOGIN */
window.login=function(){
if(username.value==="admin" && password.value==="admin123"){
loginModal.classList.add("hidden");
app.classList.remove("hidden");
initCharts();
loadAlerts();
animateKPIs();
startRealtime();
}else{
alert("Login incorreto");
}
}

window.logout=function(){
clearInterval(realtimeInterval);
location.reload();
}

/* SIDEBAR */
menuToggle.onclick=function(){
sidebar.classList.toggle("-translate-x-full");
overlay.classList.toggle("hidden");
}
overlay.onclick=function(){
sidebar.classList.add("-translate-x-full");
overlay.classList.add("hidden");
}

/* DASHBOARD */
window.showDashboard=function(id){
document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
}

function animateKPIs(){
totalConsumption.textContent="1.3 GWh";
efficiency.textContent="93%";
cost.textContent="R$480.000";
}

/* CHARTS */
function initCharts(){

overviewChart=new Chart(overviewChart=document.getElementById("overviewChart"),{
type:"line",
data:{labels:months,datasets:[{data:baseData,borderColor:"#00FFFF",backgroundColor:"rgba(0,255,255,0.1)",fill:true,tension:.4}]},
options:{responsive:true,plugins:{legend:{display:false}}}
});

financeChart=new Chart(document.getElementById("financeChart"),{
type:"bar",
data:{labels:months,datasets:[{data:financeData,backgroundColor:"#00FFFF80"}]},
options:{responsive:true,plugins:{legend:{display:false}}}
});

updateAI();
projection();
}

/* REALTIME */
function startRealtime(){
realtimeInterval=setInterval(()=>{

let newVal=Math.round(baseData[5]+(Math.random()*6-3));
baseData.push(newVal); baseData.shift();

let newFin=Math.round(financeData[5]+(Math.random()*20000-10000));
financeData.push(newFin); financeData.shift();

overviewChart.data.datasets[0].data=baseData;
overviewChart.update();

financeChart.data.datasets[0].data=financeData;
financeChart.update();

updateAI();
projection();

if(Math.random()>0.85){
mockAlerts.push({message:"âš  OscilaÃ§Ã£o "+new Date().toLocaleTimeString()});
loadAlerts();
}

},5000);
}

/* IA */
function updateAI(){
let avg=baseData.reduce((a,b)=>a+b)/baseData.length;
aiInsight.textContent=
avg>85?
"ðŸ“ˆ Consumo subindo. Auditoria recomendada.":
"ðŸ“‰ Consumo estÃ¡vel. Sistema dentro do ideal.";
}

/* PROJEÃ‡ÃƒO */
function projection(){
let avg=financeData.reduce((a,b)=>a+b)/financeData.length;
financeProjection.textContent="ProjeÃ§Ã£o prÃ³xima mÃªs: R$ "+Math.round(avg*1.05).toLocaleString();
}

/* ALERTAS */
function loadAlerts(){
alertsList.innerHTML="";
mockAlerts.forEach((a,i)=>{
alertsList.innerHTML+=`
<li class="bg-[#0F172A] p-4 rounded-xl flex justify-between">
${a.message}
<button onclick="resolveAlert(${i})" class="bg-cyan-500 px-3 py-1 rounded text-black text-xs">Resolver</button>
</li>`;
});
alertsCount.textContent=mockAlerts.length;
}

window.resolveAlert=function(i){
mockAlerts.splice(i,1);
loadAlerts();
}

/* FILTRO */
window.applyFilter=function(){
let value=parseInt(periodFilter.value);
overviewChart.data.labels=months.slice(-value);
overviewChart.data.datasets[0].data=baseData.slice(-value);
overviewChart.update();
}

});
</script>

</body>
</html>


